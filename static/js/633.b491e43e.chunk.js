"use strict";(self.webpackChunknetflix_gpt=self.webpackChunknetflix_gpt||[]).push([[633],{633:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var l=s(4420),a=s(6906),i=s(184);const o=()=>{const{gptResults:e,movies:t}=(0,l.v9)((e=>e.search));return e?(0,i.jsx)(i.Fragment,{children:e.map(((e,s)=>t&&t[s]&&t[s].results&&t[s].results.length>0?(0,i.jsx)(a.Z,{heading:e,data:t[s]},e):null))}):null};var n=s(2791),r=s(1413);const c={NODE_ENV:"production",PUBLIC_URL:"/Netflix_GPT",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_URL:"http://localhost:3000",REACT_APP_TMDB_KEY:"eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJkOTM3ZDk5ZTUwOGRkNGY3OTVjYTQ5ZmExZTA1YzJmNCIsIm5iZiI6MTcyNTk1MzI2MC45NDk5NTMsInN1YiI6IjY0NWZhOWZlYTY3MjU0MDBlM2QxNTU1YyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.OchT3caOn2Y9-ejNFupP46-1ZqrfY8r1vrb190sLkds"}.REACT_APP_BACKEND_URL||"http://localhost:5000",d=async e=>{const t=await fetch("".concat(c,"/api/gpt"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e})});if(!t.ok)throw new Error("Failed to fetch response from backend");return await t.json()};var p=s(6275),m=s(7264),u=s(8349);const h=(0,s(3461).Z)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),x=e=>{let{searchOpacity:t}=e;const s=(0,l.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.email})),[a]=(0,n.useState)(s),[o,c]=(0,n.useState)(!1),[x,v]=(0,n.useState)(""),y=(0,l.I0)(),f=async(e,t)=>{try{const s=await fetch("".concat(p.mf,"/search/").concat(e,"?query=").concat(encodeURIComponent(t),"&language=en-US&page=1"),p.bl);return await s.json()}catch(s){return console.error("Error fetching movies:",s),{results:[]}}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"px-4 md:px-12 py-3 text-white max-w-4xl text-center m-auto mt-12",children:(0,i.jsx)("h1",{className:"text-3xl md:text-5xl mb-3 font-bold",children:"Let AI be your Movie Guru!"})}),(0,i.jsx)("div",{className:"px-4 md:px-12 py-3 sticky top-[68px] z-[99999]",style:{background:"rgba(20, 20, 20, ".concat(t,")")},children:(0,i.jsx)("form",{onSubmit:e=>e.preventDefault(),children:(0,i.jsxs)("div",{className:"flex gap-1",children:[(0,i.jsxs)("div",{className:"text-white relative w-full",children:[(0,i.jsx)("span",{className:"icon-fill text-gray-400 text-[22px] md:mt-0 md:text-[36px] absolute left-4 top-[16px] md:top-5 hidden md:block",children:(0,i.jsx)(u.Z,{style:{fontSize:"32px"}})}),(0,i.jsx)("input",{type:"text",placeholder:"Search Movies, Show and more",className:"py-4 md:py-6 pl-4 pr-12 md:px-14 w-full bg-gray-600 bg-opacity-70 rounded focus:bg-opacity-100 focus-visible:outline-none text-lg",onChange:e=>{v(e.target.value)},value:x}),x&&(0,i.jsx)("span",{className:"icon-fill text-[28px] mt-0 md:text-[36px] absolute right-4 top-4 md:top-5 cursor-pointer",onClick:()=>{v("")},children:(0,i.jsx)(h,{style:{fontSize:"32px"}})})]}),(0,i.jsx)("button",{className:"py-4 md:py-6 w-24 px-2 md:px-5 flex items-center justify-center bg-red-primary rounded text-white disabled:bg-red-800",onClick:async()=>{if(x){c(!0);try{var e;const a='\n        Tell me if this query is asking for a single movie or multiple movies: "'.concat(x,'".\n        Respond with only "single" or "multiple".\n      '),i=await d(a);if("single"===(null===i||void 0===i||null===(e=i.reply)||void 0===e?void 0:e.toLowerCase().trim())){var t,s;const e='\n          The user entered: "'.concat(x,'".\n          Correct the name if it has spelling mistakes or is incomplete.\n          Reply with only the corrected official movie title.\n        '),l=await d(e),a=null===l||void 0===l||null===(t=l.reply)||void 0===t?void 0:t.trim(),i=await f("movie",a),o=null===i||void 0===i||null===(s=i.results)||void 0===s?void 0:s.filter((e=>e.title.toLowerCase()===a.toLowerCase()&&e.poster_path));y((0,m.S)({searchResults:[a],actionType:"gptResults"})),y((0,m.S)({searchResults:[{results:o.slice(0,1)}],actionType:"movies"}))}else{var l;const e="\n          Act as a movie recommendation system and suggest some movies for the query: ".concat(x,".\n          Only give me names of up to 5 movies, comma separated.\n          Example: Spider Man, Elemental, Phir Hera Pheri\n        "),t=await d(e),s=null===t||void 0===t||null===(l=t.reply)||void 0===l?void 0:l.split(", "),a=await Promise.all(s.map((async e=>{const t=await f("movie",e);if(null!==t&&void 0!==t&&t.results){const s=t.results.filter((t=>t.title.toLowerCase()===e.toLowerCase()&&t.poster_path));return(0,r.Z)((0,r.Z)({},t),{},{results:s.slice(0,5)})}return{results:[]}})));y((0,m.S)({searchResults:s,actionType:"gptResults"})),y((0,m.S)({searchResults:a,actionType:"movies"}))}c(!1)}catch(a){console.error("Error:",a),c(!1)}}},disabled:""===x,children:o?(0,i.jsx)("div",{className:"w-5 h-5 border-t m border-gray-300 border-solid rounded-full animate-spin"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"icon-fill text-[22px] md:text-[32px] md:hidden",children:(0,i.jsx)(u.Z,{style:{fontSize:"28px"}})}),(0,i.jsx)("span",{className:"hidden md:inline-block",children:"Search"})]})})]})})})]})},v=()=>{const[e,t]=(0,n.useState)(1),[s,l]=(0,n.useState)(0),a=()=>{const s=window.scrollY;t(s<70?1-s/70:0),l(0===e?1:0)};return(0,n.useEffect)((()=>(window.addEventListener("scroll",a),()=>{window.removeEventListener("scroll",a)})),[e]),(0,i.jsxs)("div",{className:"search-page",children:[(0,i.jsx)("div",{className:"bg-skin w-full h-[430px] absolute top-0 -z-0 bg-gradient-to-b from-indigo-800 to-[#141414] transition-colors",style:{opacity:"".concat(e)}}),(0,i.jsxs)("div",{className:"search relative",children:[(0,i.jsx)(x,{searchOpacity:s}),(0,i.jsx)("div",{className:"mt-3 px-4 md:px-12 py-3 min-h-[700px]",children:(0,i.jsx)(o,{})})]})]})}},7264:(e,t,s)=>{s.d(t,{S:()=>a,Z:()=>i});const l=(0,s(7324).oM)({name:"search",initialState:{gptResults:null,movies:null,shows:null},reducers:{setGptSearch:(e,t)=>{const{actionType:s,searchResults:l}=t.payload;e[s]=l}}}),{setGptSearch:a}=l.actions,i=l.reducer},8349:(e,t,s)=>{s.d(t,{Z:()=>i});var l=s(3461),a=s(184);const i=(0,l.Z)((0,a.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"SearchOutlined")}}]);
//# sourceMappingURL=633.b491e43e.chunk.js.map